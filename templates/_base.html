{% load bootstrap4 %}
{% load static %}
{% load humanize %}

{% bootstrap_css %}         {# Embed Bootstrap CSS #}
{% bootstrap_javascript jquery='full' %}  {# Embed Bootstrap JS+jQuery #}
{{ form.media }}            {# Adds date-picker required JS and CSS #}

<!doctype html>
<html lang="fr-fr">
  <head>
    <meta charset="utf-8">

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/dashboard/">

    <!-- Bootstrap core CSS -->
    <!-- <link href="../assets/dist/css/bootstrap.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.1/css/all.min.css" integrity="sha256-2XFplPlrFClt0bIdPgpz8H7ojnk10H69xRqd9+uTShA=" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" crossorigin="anonymous" />
      
      <!-- CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'css/base.css' %}">

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">    
    <!--Chart js-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" integrity="sha256-Uv9BNBucvCPipKQ2NS9wYpJmi8DTOEfTA/nH2aoJALw=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css" integrity="sha256-aa0xaJgmK/X74WM224KMQeNQC2xYKwlAt08oZqjeF0E=" crossorigin="anonymous" />
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Chart -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

</head>







<body id="body-pd">
  <header class="header" id="header">
      <div class="header_toggle"> <i class='bx bx-menu' id="header-toggle"></i> </div>
      <div class="header_img"> 
          
        {% if request.user.profile.file %}
                <img src="{{request.user.profile.file.url}}" class="img-fluid d-block rounded-circle avatar-md" width="100" alt="user" href="{% url 'accounts:account' %}" > 
    
          {% endif %}
        </div>

  </header>
  <div class="l-navbar" id="nav-bar">
      <nav class="nav">
          <div> <a href="{% url 'home' %}" class="nav_logo"> <i class='bx bx-layer nav_logo-icon'></i> <span class="nav_logo-name"><img src="{% static 'images/eurodefi_audit_fond_blanc.png'%}" width="100" alt=""></span> </a>
              <div class="nav_list">
            {% if user.is_authenticated %}

            <a href="{% url 'home' %}" class="nav_link text-light"> 
              <i class='bx bx-grid-alt nav_icon'></i> 
              <span class="nav_name">Dashboard</span>
           </a> 

                {% if request.user.is_staff %}

 
 
                    <a href="#" class="nav_link"> 
                        <i class='bx bx-message-square-detail nav_icon'></i> 
                        <span class="nav_name">Messages</span> 
                    </a>
                


                    <a href="#" class="nav_link"> 
                        <i class='bx bx-bar-chart-alt-2 nav_icon'></i> 
                        <span class="nav_name">Stats</span> 
                    </a> 

                    <a href="{% url 'ordres:ordres' %}" class="nav_link"> 
                        <i class='bx bxs-diamond nav_icon'></i> 
                        <span class="nav_name">Missions</span> 
                    </a> 
                    

                    {% endif %}



                    {% if 'Managers' in groups or request.user.is_staff %}
                    <a href="{% url 'customers:integrationData' %}" class="nav_link text-light"> 
                      <i class='bx bxs-book-content nav_icon'></i> 
                      <span class="nav_name">Fiches</span> 
                  </a>
                    <a href="{% url 'ordres:lettremissionList' %}" class="nav_link text-light"> 
                      <i class='bx bx-wallet nav_icon'></i> 
                      <span class="nav_name">Clients</span> 
                  </a> 
                    <a href="{% url 'tasks:periodList' %}" class="nav_link text-light"> 
                      <i class="bx bx-calendar-check nav_icon"></i>
                      <span class="nav_name">Gestion Echéances</span> 
                  </a>
                  <a href="{% url 'tasks:exerciceList' %}" class="nav_link text-light"> 
                    <i class="fas fa-layer-group nav_icon"></i>
                    <span class="nav_name">Gestion Exercices</span> 
                  </a>
                  <a href="{% url 'accounts:userPortefolioManager' %}" class="nav_link text-light"> 
                      <i class='fas fa-tasks nav_icon'></i> 
                      <span class="nav_name">Supervision Tâches</span> 
                    </a> 
                    <a href="{% url 'tasks:exerciceListSituation' %}" class="nav_link text-light"> 
                      <i class='fas fa-eye nav_icon'></i> 
                      <span class="nav_name">Supervision Situations</span> 
                    </a>
                    <a href="{% url 'tasks:exerciceListDAS' %}" class="nav_link text-light"> 
                      <i class='fas fa-search-dollar nav_icon'></i> 
                      <span class="nav_name">Supervision DAS</span> 
                    </a>
                    <a href="{% url 'accounts:userPortefolioEditionManager' %}" class="nav_link text-light"> 
                      <i class='fas fa-print nav_icon'></i> 
                        <span class="nav_name">Supervision Editions</span> 
                    </a> 
                    {% endif %}
                    <a href="{% url 'accounts:userPortefolio' %}" class="nav_link"> 
                      <i class='bx bx-briefcase nav_icon'></i> 
                      <span class="nav_name">Mes Tâches</span> 
                    </a> 

                    <a href="{% url 'accounts:userPortefolioEdition' %}" class="nav_link"> 
                      <i class='bx bx-printer nav_icon'></i> 
                        <span class="nav_name">Mes Editions</span> 
                    </a> 
                    <a href="{% url 'accounts:userPortefolioSituation' %}" class="nav_link"> 
                      <i class='fas fa-cash-register nav_icon'></i> 
                      <span class="nav_name">Mes Situations</span> 
                    </a>
                    <a href="{% url 'accounts:userPortefolioDAS' %}" class="nav_link"> 
                      <i class='fas fa-hand-holding-usd nav_icon'></i> 
                      <span class="nav_name">Mes DAS</span> 
                    </a>
                    <a href="{% url 'accounts:account' %}" class="nav_link"> 
                        <i class='bx bx-user nav_icon'></i> 
                        <span class="nav_name">Profile</span> 
                    </a>
                </div>

          </div> 

            <a href="{% url 'accounts:logout' %}" class="nav_link"> 
                <i class='bx bx-log-out nav_icon'></i>
                 <span class="nav_name">SignOut</span>
              </a>
            {% else %}
              <div>
                <a href="{% url 'accounts:login' %}" class="nav_link"> 
                    <i class='bx bx-log-in nav_icon'></i>
                     <span class="nav_name">Sign In</span>
                  </a>
    
                  <a href="{% url 'accounts:register' %}" class="nav_link"> 
                    <i class="bx bx-user-plus nav_icon"></i>
                    <span class="nav_name">Sign Up</span>
                  </a>
    
              </div>

            {% endif %}
      </nav>
  </div>
  <!--Container Main start-->
  <div>
    <br>
    <br>
    {% block scripts %}

    {% endblock scripts %}

    {% block content %}

    {% endblock content %}
  </div>
  <!--Container Main end-->

  <script src=" https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>

  <script src="{% static 'js/base.js' %}" defer>
        document.addEventListener("DOMContentLoaded", function(event) {

        const showNavbar = (toggleId, navId, bodyId, headerId) =>{
        const toggle = document.getElementById(toggleId),
        nav = document.getElementById(navId),
        bodypd = document.getElementById(bodyId),
        headerpd = document.getElementById(headerId)

        // Validate that all variables exist
        if(toggle && nav && bodypd && headerpd){
        toggle.addEventListener('click', ()=>{
        // show navbar
        nav.classList.toggle('show')
        // change icon
        toggle.classList.toggle('bx-x')
        // add padding to body
        bodypd.classList.toggle('body-pd')
        // add padding to header
        headerpd.classList.toggle('body-pd')
        })
        }
        }

        showNavbar('header-toggle','nav-bar','body-pd','header')

        /*===== LINK ACTIVE =====*/
        const linkColor = document.querySelectorAll('.nav_link')

        function colorLink(){
        if(linkColor){
        linkColor.forEach(l=> l.classList.remove('active'))
        this.classList.add('active')
        }
        }
        linkColor.forEach(l=> l.addEventListener('click', colorLink))

        // Your code to run since DOM is loaded and ready
        });
  </script>
  
  <!-- filter anything -->
<script>
	$(document).ready(function(){
	  $("#myInput").on("keyup", function() {
		var value = $(this).val().toLowerCase();
		$("#myDIV *").filter(function() {
		  $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
		});
	  });
	});
	</script>

  <!-- filtre table -->
  <script>
    $(document).ready(function(){
      $("#myInput").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("#myTable tr").filter(function() {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
    });
    </script>
<!-- delete company temps---------
    <script>
      $(document).ready(function(){
        $('#delete_btn').click(function(){
          if(confirm('Are you sure you want to delete / apply this items ?')){
            var id=[];
            var csrf=$('input[name=csrfmiddlewaretoken]').val();
            $(':checkbox:checked').each(function(i){
              id[i]=$(this).val()
            })
            if(id.length===0){
              alert('Please select items to delete / apply !')
            }else{
              console.log(id)
              $.ajax({
                method:"POST",
                data:{
                  id,
                  csrfmiddlewaretoken:csrf
                },
                success:function(response){
                  for(var i=0; i < id.length; i++){
                  $('tr#'+id[i]+'').css('backgroud-color', '#ccc');
                  $('tr#'+id[i]+'').fadeOut('slow');
                  }
                }
              })
            }
    
    
          }
        })
      })
    </script> -->

  </body>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js" integrity="sha384-1CmrxMRARb6aLqgBO7yyAxTOQE2AKb9GfXnEo760AUcUmFx3ibVJJAzGytlQcNXd" crossorigin="anonymous"></script>
  <script src="/assets/vendor/chart.js/dist/Chart.min.js"></script>
  <script src="/assets/vendor/chart.js/dist/Chart.extension.js"></script>
</html>
